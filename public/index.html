<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“Š SprÃ¡va mÄ›Å™idel a odeÄtÅ¯</title>
</head>
<body>
    <h1>ğŸ“Š SprÃ¡va mÄ›Å™idel a odeÄtÅ¯</h1>

    <!-- âœ… PÅ™idÃ¡nÃ­ mÄ›Å™idla -->
    <h2>â• PÅ™idat mÄ›Å™idlo</h2>
    <form id="addMeterForm">
        <label for="type">Typ mÄ›Å™idla (water/heat):</label><br>
        <input type="text" id="type" name="type" required><br><br>

        <label for="serial_number">SÃ©riovÃ© ÄÃ­slo:</label><br>
        <input type="text" id="serial_number" name="serial_number" required><br><br>

        <button type="submit">ğŸ“¥ PÅ™idat mÄ›Å™idlo</button>
    </form>

    <hr>

    <!-- âœï¸ Ãšprava mÄ›Å™idla -->
    <h2>âœï¸ Upravit mÄ›Å™idlo</h2>
    <form id="editMeterForm">
        <label for="edit_meter_id">ID mÄ›Å™idla:</label><br>
        <input type="number" id="edit_meter_id" name="meter_id" required><br><br>

        <label for="edit_type">NovÃ½ typ mÄ›Å™idla (water/heat):</label><br>
        <input type="text" id="edit_type" name="type" required><br><br>

        <label for="edit_serial_number">NovÃ© sÃ©riovÃ© ÄÃ­slo:</label><br>
        <input type="text" id="edit_serial_number" name="serial_number" required><br><br>

        <button type="submit">âœï¸ Upravit mÄ›Å™idlo</button>
    </form>

    <hr>

    <!-- ğŸ“¥ PÅ™idÃ¡nÃ­ odeÄtu -->
    <h2>ğŸ“¥ PÅ™idat odeÄet</h2>
    <form id="addReadingForm">
        <label for="meter_id_reading">ID mÄ›Å™idla:</label><br>
        <input type="number" id="meter_id_reading" name="meter_id" required><br><br>

        <label for="value">Hodnota odeÄtu:</label><br>
        <input type="number" id="value" name="value" step="0.01" required><br><br>

        <label for="reading_date">Datum odeÄtu:</label><br>
        <input type="date" id="reading_date" name="reading_date" required><br><br>

        <button type="submit">ğŸ“¥ PÅ™idat odeÄet</button>
    </form>

    <hr>

    <!-- âœï¸ Ãšprava odeÄtu -->
    <h2>âœï¸ Upravit odeÄet</h2>
    <form id="editReadingForm">
        <label for="edit_reading_id">ID odeÄtu:</label><br>
        <input type="number" id="edit_reading_id" name="reading_id" required><br><br>

        <label for="edit_value">NovÃ¡ hodnota odeÄtu:</label><br>
        <input type="number" id="edit_value" name="value" step="0.01" required><br><br>

        <label for="edit_reading_date">NovÃ© datum odeÄtu:</label><br>
        <input type="date" id="edit_reading_date" name="reading_date" required><br><br>

        <button type="submit">âœï¸ Upravit odeÄet</button>
    </form>

    <hr>

    <div id="responseMessage"></div>

    <script>
        const token = "TVÅ®J_JWT_TOKEN"; // NahraÄ skuteÄnÃ½m JWT tokenem

        // âœ… PÅ™idÃ¡nÃ­ mÄ›Å™idla
        document.getElementById('addMeterForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const data = {
                type: document.getElementById('type').value,
                serial_number: document.getElementById('serial_number').value
            };

            fetch('http://localhost:3000/voda/customer/add-meter', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('âŒ Chyba:', error));
        });

        // âœï¸ Ãšprava mÄ›Å™idla
        document.getElementById('editMeterForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const data = {
                meter_id: document.getElementById('edit_meter_id').value,
                type: document.getElementById('edit_type').value,
                serial_number: document.getElementById('edit_serial_number').value
            };

            fetch('http://localhost:3000/voda/customer/edit-meter', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('âŒ Chyba:', error));
        });

        // ğŸ“¥ PÅ™idÃ¡nÃ­ odeÄtu
        document.getElementById('addReadingForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const data = {
                meter_id: document.getElementById('meter_id_reading').value,
                value: document.getElementById('value').value,
                reading_date: document.getElementById('reading_date').value
            };

            fetch('http://localhost:3000/voda/customer/add-reading', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('âŒ Chyba:', error));
        });

        // âœï¸ Ãšprava odeÄtu
        document.getElementById('editReadingForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const data = {
                reading_id: document.getElementById('edit_reading_id').value,
                value: document.getElementById('edit_value').value,
                reading_date: document.getElementById('edit_reading_date').value
            };

            fetch('http://localhost:3000/voda/customer/edit-reading', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => alert(data.message))
            .catch(error => console.error('âŒ Chyba:', error));
        });
    </script>
</body>
</html>
